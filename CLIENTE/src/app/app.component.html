<div class="container">
  <hello name="{{ name }}"></hello>

</div>
<div class="container">
  <div class="row">
    <br>
    <input [hidden]="true" type="file" name="files" class="form-control" #uploads (change)="onChange(uploads.files)"
           multiplec xclkvsdlk
           value="process"/>
    <br>
    <button (click)="obtenerArchivoExistente()" data-toggle="modal" data-target="#searchFile" type="button"
            class="btn btn-warning">Cargar Archivo Existente
    </button>
    <button (click)="uploads.click()" type="button" class="btn btn-primary">Cargar Archivo Nuevo</button>
    <button data-toggle="modal" data-target="#searchFile" *ngIf="file!=null" (click)="activeSelect =false;"
            type="button" class="btn btn-success">Guardar
      Archivo
    </button>
  </div>
  <table class="table table-striped table-responsive">
    <thead>
    <tr>
      <td>Nombre</td>
      <td>Fecha</td>
      <td>Departamento</td>
      <td>Hora1</td>
      <td>Hora2</td>
      <td>Hora3</td>
      <td>Hora4</td>
      <td>NÂ° Timbradas</td>
      <td>Hora Trabajada</td>
      <td *ngIf="this.file ==null">Editar</td>
      <td *ngIf="this.file ==null">Eliminar</td>
    </tr>
    </thead>

    <tbody *ngIf="this.file !=null">
    <tr *ngFor="let record of users;let i = index;">
      <ng-container *ngIf="quitar(i)">
        <td> {{record.Nombre}}</td>
        <td> {{record.Fecha}} </td>
        <td> {{record.Departamento}} </td>
        <td> {{record.Hora1}} </td>
        <td> {{record.Hora2}} </td>
        <td> {{record.Hora3}} </td>
        <td> {{record.Hora4}} </td>
        <td *ngIf="contTimbradas(record,i)"> {{record.timbradas}} </td>
        <td *ngIf="contHorasTrabajadas(record,i)">{{record.HoraTrabajada}}</td>

      </ng-container>
    </tr>
    </tbody>
    <tbody *ngIf="this.file ==null">
    <tr *ngFor="let record of users;let i = index;">
      <ng-container *ngIf="quitar(i)">
        <td> {{record.Nombre}}</td>
        <td> {{record.Fecha}} </td>
        <td> {{record.Departamento}} </td>
        <td> {{record.Hora1}} </td>
        <td> {{record.Hora2}} </td>
        <td> {{record.Hora3}} </td>
        <td> {{record.Hora4}} </td>
        <td> {{record.timbradas}} </td>
        <td>{{record.HoraTrabajada}}</td>
        <td>
          <button type="button" class="btn btn-primary">Editar</button>
        </td>
        <td>
          <button type="button" class="btn btn-danger">Eliminar</button>
        </td>
      </ng-container>
    </tr>
    </tbody>
  </table>
</div>


<div class="modal fade" id="searchFile" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
     aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Biometrico</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body" *ngIf="activeSelect">
        <select [(ngModel)]="archivoSelected" class="custom-select mr-sm-2" id="inlineFormCustomSelect">
          <option selected value="selecione">Seleccione</option>
          <option *ngFor="let item of dbFiles" value="{{item._id}}">{{item.nombre}}</option>
        </select>
      </div>
      <div class="modal-body" *ngIf="!activeSelect">
        <form>
          <div class="form-group">
            <label for="nombre" class="col-form-label">Nombre del Archivo:</label>
            <input type="text" class="form-control" id="nombre" [(ngModel)]="this.archivo.nombre" name="nombre">
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-danger" data-dismiss="modal">Cerrar</button>
        <button *ngIf="activeSelect" [disabled]="archivoSelected == 'selecione'" data-dismiss="modal"
                (click)="loadData(archivoSelected)"
                type="button" class="btn btn-primary">Abrir
        </button>
        <button *ngIf="!activeSelect" data-dismiss="modal" (click)="guardarArchivoPersonas()" type="button"
                class="btn btn-primary">Guardar
        </button>
      </div>
    </div>
  </div>
</div>
